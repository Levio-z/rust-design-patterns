# Rust 命令模式（Command Pattern）示例

使用 Rust 实现经典行为型设计模式 —— 命令模式。支持命令封装、排队执行、撤销操作和日志记录，并采用 `Rc<RefCell<T>>` 实现共享状态，使用 `VecDeque` 实现先进先出执行。

---

### 项目简介

命令模式（Command Pattern）是一种行为型设计模式，它将请求封装为对象，使你可以将操作参数化、排队执行、记录日志，甚至支持撤销与重做功能。

本项目展示了命令模式在 Rust 中的应用，包括：

- 命令接口定义
- 命令对象封装
- 多命令共享接收者（使用 `Rc<RefCell<Editor>>`）
- 命令队列支持先进先出执行（基于 `VecDeque`）
- 日志系统记录执行历史
- 支持 `undo()` 撤销操作

---

### 模块结构

```text
src/
├── main.rs         // 客户端入口
├── editor.rs       // 接收者：编辑器，负责处理具体操作
├── command.rs      // 命令 trait 及其具体实现
└── invoker.rs      // 调用者：命令队列，负责调度执行、日志、撤销
```

### 功能亮点

| 功能       | 描述                                                         |
|------------|--------------------------------------------------------------|
| 命令封装   | 使用 trait 封装操作逻辑，解耦调用者与接收者                   |
| 队列调度   | 使用 VecDeque 保证命令按添加顺序（FIFO）执行                |
| 状态共享   | 多命令共享同一个 Editor 实例（通过 Rc<RefCell<_>>）         |
| 日志记录   | 所有操作均记录日志，便于调试与追踪                            |
| 支持撤销   | 可撤销最后执行的命令，保持历史堆栈                            |